<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>やじゅがん ～野獣の眼光～</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="mobile.css">
  <link rel="stylesheet" href="loading.css">
  <script src="https://cdn.jsdelivr.net/npm/howler@2.2.4/dist/howler.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/nipplejs@0.10.2/dist/nipplejs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
</head>
<body>
  <div id="loading">
    ロード中…
    <!-- ↓ CanvasにWebフォントが表示されない疑惑があるため -->
    <div class="fw-900">
      やじゅがん
    </div>
    <div class="fw-400">
      はじめから
      つづきから
      ひで
      ノンケ
      迫真
      スタート
      HI SCORE
      -0123456789
      Loading...
      Lv.
      クリックで攻撃
      AキーとDキーで移動
      指を押したまま動かすと移動
      アイスティー
      FOO↑気持ちいい
      じゃけん夜行きましょうね
      ちょっと歯当たんよ～
      オッスお願いしま～す
      カンノミホ
      学生です
      なんですか
      中断したい
      何でもない
      チラチラ見てただろ
      いや、見てないですよ
      嘘つけ絶対見てたゾ
      なんで見る必要なんかあるんですか
      見たけりゃ見せてやるよ
      やめてくれよ…（絶望）
      リザルト
      人間の屑がこの野郎
      は？
      へなちょこ
      もうちょっと力入れないとダメだね
      ま、多少はね？
      36…普通だな！
      なんか足んねぇよなぁ？
      いいゾ～これ
      やりますねぇ！
      終わる
      つぶやく
    </div>
  </div>
  <div id="app" style="display: none;">
    <div id="game-canvas-wrapper">
      <canvas id="game-canvas" width="900" height="450"></canvas>
    </div>
    <div id="description-container">
      <div id="debug">
        <button id="create-enemy">敵生成停止</button>
        <button id="sound-room">サウンドルーム</button>
        <button id="self-destruction">自滅</button>
        <span id="debug-fps"></span>
        <span id="debug-text"></span>
      </div>
      <div id="error"></div>
      <div id="notice">
        マウス操作は激激激激ムズのためスマホ推奨
      </div>
      <div id="android">
        Androidは未所持につき未テスト<br>
        バグったらごめん
      </div>
      <h1>やじゅがん <span>～野獣の眼光～</span></h1>
      <div class="description wiki">
        <div class="source">
          出典：フリー百科事典『ウィヒペディア（Wihipedia）』
        </div>
        <p>
          「やじゅがん」は、「真夏の夜の淫夢」シリーズを題材としたフリーゲームであり、360度から襲いかかる野獣先輩を銃で迎撃し続ける形式のガンシューティングゲームである。プレイヤーは四方八方から湧いてくる野獣先輩を撃ち倒しながら、できるだけ長く生き延び、高得点を目指す。
        </p>
        <p>
          本作では、敵キャラクターとして登場する野獣先輩たちが画面を埋め尽くし、音声として淫夢語録も使用されている。
          これにより、視覚と聴覚の両面からプレイヤーに容赦なく迫る演出が形成され、夢か現実かも分からなくなるような没入感と混沌に満ちたゲーム体験を生み出している。
        </p>
        <p>
          操作はシンプルで直感的だが、敵の出現頻度と速度が徐々に上昇していくため、反射神経と覚悟が試される構成となっている。ゲームオーバーの概念は存在するが、ストーリーや明確なクリア条件は用意されておらず、すべては「撃て、倒せ、掘られるな」という精神に集約される。
        </p>
      </div>
      <hr>
      <details class="description gal-gun">
        <summary>おまけ（タイトルの元ネタ）</summary>

        <div>
          <a href="https://galgun.com/2/game/">「ぎゃるがん」</a>について　お話しします<br>
          みんな「ぎゃるがん」って　知ってるかな？　「ぎゃるがん」というのはね……<br>
          たとえば　女の子が　こっちを見て　恥ずかしそうに　赤くなったり<br>
          あるいは　パンツが　強風で　ひらっと見えて　心が洗われたり<br>
          そういったことを　「ぎゃるがん」というんだ<br>
          よい子のみんなの　こころは　もちろん　胸の中に　あるんだけどね<br>
          ときどき　その「こころ」が　コントローラーを通じて　女の子の「弱点」を　見抜くんだよ<br>
          それは　「エクスタシーショット」って　いうんだけど……<br>
          これを　正しい箇所に　撃つとね　なんと　その子は　気持ちよくなって　倒れちゃうんだ！<br>
          でも　心配しないで<br>
          ぎゃるがんの世界では　気持ちよくなるのは　悪いことじゃないんだよ<br>
          むしろ　「真実の愛」に　たどり着くための　第一歩なんだって！<br>
          今　ぎゃるがんを　プレイしていない子は　これから先　ぎゃるがんを　プレイするようにしようね！<br>
          今　ぎゃるがんを　プレイしている　よい子は　もっと布教しようね！<br>
          そして　君を育ててくれた　お父さん　お母さんにも　ぜひ見せてあげて<br>
          「愛」とは何かを　一緒に　考えてみようね！<br>
        </div>
      </details>
      <details class="description gal-gun">
        <summary>おまけ（上の続き）</summary>
        さて、ここを読んでいるホモの諸君。<br>
        ぎゃるがんシリーズを遊びたいが、どれを遊べばいいのか分からない──そんな悩みを抱えているだろう。<br>
        その疑問に、この私がお答えしよう。<br>

        <br>
      
        結論から言うと…<br>
        <strong>「ぎゃるがん2」をやれ！</strong><br>

        <br>
      
        理由を列挙すると、<br>
        <ul>
          <li>女の子が可愛い（モデルの出来が良い）</li>
          <li>女の子の罵倒が良い</li>
          <li>女の子のキャラが濃くて面白い</li>
          <li>女の子の声が可愛い（ぽかぽかするの～）</li>
          <li>見つめたときの反応が非常に良い！</li>
          <li>ゲームがいい感じにぬるく、TNPも良く没入感が削がれない！</li>
          <li>スコアタが面白い！</li>
          <li>プロフィール集めがかなり楽（過去作はほぼ苦行）</li>
          <li>値段が安い！（セール中は1000円ちょっとで買える）</li>
          <li>スコアタが面白い！</li>
          <li>カニ缶探偵可愛い</li>
          <li>アニタ・ベルマン可愛い</li>
          <li>星空志保可愛い</li>
          <li>異世界姉妹可愛い</li>
          <li>田中力子イメチェン可愛い</li>
          <li>テトリスちゃん可愛い</li>
          <li>モテモテは校則違反ですっ！</li>
          <li>日本万歳！日本万歳！</li>
          <li>なな子に踏まれながら■■管理されたいゾ…</li>
          <li>とにかくキャラがシリーズ1可愛い！</li>
        </ul>
      
        ……と、いう訳だ。<br>
      
        過去作も面白いが、やりこみ要素が廃人仕様。<br>
        『だぶるぴーす』も良いが、私は断然『2』を推す！
      </details>
    </div>
  </div>

  <script src="src/asset/asset_utils.js"></script>
  <script src="src/asset/image_storage.js"></script>
  <script src="src/asset/sound_storage.js"></script>
  <script src="src/asset/background_image.js"></script>
  <script src="src/asset/sound_config.js"></script>

  <script src="src/scene/scene_manager.js"></script>
  <script src="src/scene/scene.js"></script>
  <script src="src/scene/title_scene.js"></script>
  <script src="src/scene/gameplay_scene.js"></script>
  <script src="src/scene/game_over_scene.js"></script>

  <script src="src/entity/entity.js"></script>
  <script src="src/entity/kmr.js"></script>
  <script src="src/entity/medikara_senpai.js"></script>
  <script src="src/entity/running_senpai.js"></script>
  <script src="src/entity/mukimuki_senpai.js"></script>
  <script src="src/entity/meteor_senpai.js"></script>
  <script src="src/entity/kunekune_senpai.js"></script>
  <script src="src/entity/shouting_senpai.js"></script>
  <script src="src/entity/punch_senpai.js"></script>
  <script src="src/entity/kotodama.js"></script>
  <script src="src/entity/honsya.js"></script>

  <script src="src/button/button.js"></script>
  <script src="src/button/title/hajime_button.js"></script>
  <script src="src/button/title/tuduki_button.js"></script>
  <script src="src/button/title/easy_button.js"></script>
  <script src="src/button/title/normal_button.js"></script>
  <script src="src/button/title/hard_button.js"></script>
  <script src="src/button/title/start_button.js"></script>
  <script src="src/button/gameplay/turn_left_button.js"></script>
  <script src="src/button/gameplay/turn_right_button.js"></script>
  <script src="src/button/gameplay/back_button.js"></script>
  <script src="src/button/gameplay/quit_button.js"></script>
  <script src="src/button/gameplay/complain_button.js"></script>
  <script src="src/button/game_over/goto_title_button.js"></script>
  <script src="src/button/game_over/tweet_button.js"></script>
 
  <script src="src/canvas_utils.js"></script>
  <script src="src/player.js"></script> 
  <script src="src/explosion.js"></script>
  <script src="src/effect.js"></script>
  <script src="src/message_window.js"></script>
  
  <script src="src/main.js"></script>

  <!--
    余談

    実は、本作は 60fps と 30fps とで難易度が異なります。
    30fps のほうが敵の動きが速く、出現速度も高くなっています。

    これは、まあ、純粋に私の見落としです。
    「30fps の端末なんて存在しないだろｗ」と思い込み、60fps であることを前提に開発していました。
    （ちなみに 60fps を超える場合は、強制的に 60fps に制限しています）

    ところが、スマホで動作確認をしていると、なぜか 30fps になるときがありました。
    いつもは 60fps なのにおかしいな……と思って調べてみたところ、

    なんと！低電力モードになると、ブラウザが 30fps に制限されることがあるらしいのです！

    これは完全に想定外で、非常に困りました。
    なぜなら、ゲーム内のすべての挙動が 60fps 前提で設計されているからです。

    たとえば、
    「1フレーム目に画像1、2フレーム目に画像2を表示する」
    という処理を 60fps 基準で組んでいると、30fps 環境ではどちらかの画像がすっ飛ぶことになります。
    （まあ、この点は妥協しました）

    さらに、敵の出現速度なども フレーム数ベースで管理していたため、
    今さら 30fps に対応させるのは、工数的にも、やる気的にも難しかったのです。

    そのため苦肉の策として、30fps のときは、60fps の処理を「1フレームで2回」実行することで、疑似的に 60fps を再現するようにしました。
    ……結果、ゲーム速度がいろいろと狂いました。

    この経験から、今どきのゲーム開発では「フレーム数」ではなく、「deltaTime（経過時間）」でパラメータを管理すべきだと痛感しました。

    そんなお話でした。
  -->
</body>
</html>
